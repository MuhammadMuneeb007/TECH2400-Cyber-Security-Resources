<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pfSense OpenVPN Network Diagram</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .diagram {
            width: 100%;
            min-height: 800px;
            position: relative;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 40px 20px;
        }
        
        .zone {
            position: absolute;
            border: 2px dashed;
            border-radius: 10px;
            padding: 15px;
            background: rgba(255,255,255,0.6);
        }
        
        .internet-zone {
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            height: 150px;
            border-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
        }
        
        .firewall-zone {
            top: 200px;
            left: 50%;
            transform: translateX(-50%);
            width: 350px;
            height: 250px;
            border-color: #4ecdc4;
            background: rgba(78, 205, 196, 0.1);
        }
        
        .lan-zone {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 280px;
            border-color: #95e1d3;
            background: rgba(149, 225, 211, 0.1);
        }
        
        .vpn-zone {
            top: 200px;
            left: 20px;
            width: 280px;
            height: 400px;
            border-color: #ffa502;
            background: rgba(255, 165, 2, 0.1);
        }
        
        .zone-label {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .component {
            position: absolute;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        
        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }
        
        .component-icon {
            font-size: 40px;
            margin-bottom: 8px;
        }
        
        .component-label {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }
        
        .component-info {
            font-size: 10px;
            color: #666;
        }
        
        .internet {
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
        }
        
        .firewall {
            top: 260px;
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .firewall .component-label,
        .firewall .component-info {
            color: white;
        }
        
        .openvpn-server {
            top: 360px;
            left: 50%;
            transform: translateX(-50%);
            width: 220px;
            background: #ffa502;
            color: white;
        }
        
        .openvpn-server .component-label,
        .openvpn-server .component-info {
            color: white;
        }
        
        .computer1 {
            bottom: 120px;
            left: 50%;
            transform: translateX(-280px);
        }
        
        .computer2 {
            bottom: 120px;
            left: 50%;
            transform: translateX(-100px);
        }
        
        .server {
            bottom: 120px;
            left: 50%;
            transform: translateX(80px);
        }
        
        .printer {
            bottom: 120px;
            left: 50%;
            transform: translateX(260px);
        }
        
        .contractor1 {
            top: 250px;
            left: 60px;
        }
        
        .contractor2 {
            top: 380px;
            left: 60px;
        }
        
        .contractor3 {
            top: 510px;
            left: 60px;
        }
        
        .ca-cert {
            top: 260px;
            right: 40px;
            width: 200px;
            background: #f39c12;
            color: white;
        }
        
        .ca-cert .component-label,
        .ca-cert .component-info {
            color: white;
        }
        
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .component {
            z-index: 1;
        }
        
        line, path {
            stroke-width: 2;
        }
        
        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 11px;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .legend-line {
            width: 30px;
            height: 2px;
            margin-right: 8px;
        }
        
        .info-box {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            width: 250px;
            font-size: 11px;
        }
        
        .info-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            font-size: 13px;
        }
        
        .info-item {
            margin-bottom: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .info-item strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîí pfSense OpenVPN Network Architecture</h1>
        <p class="subtitle">Remote Access VPN Configuration with User Authentication</p>
        
        <div class="diagram">
            <svg>
                <!-- Internet to Firewall -->
                <line x1="50%" y1="150" x2="50%" y2="250" stroke="#ff6b6b" stroke-dasharray="5,5"/>
                <text x="52%" y="200" fill="#ff6b6b" font-size="11" font-weight="bold">WAN</text>
                
                <!-- Firewall to LAN -->
                <line x1="50%" y1="450" x2="50%" y2="520" stroke="#95e1d3" stroke-width="3"/>
                <text x="52%" y="490" fill="#95e1d3" font-size="11" font-weight="bold">LAN</text>
                
                <!-- VPN Tunnels -->
                <path d="M 200 300 Q 350 280 700 260" stroke="#ffa502" fill="none" stroke-dasharray="8,4" stroke-width="2"/>
                <path d="M 200 430 Q 350 410 700 360" stroke="#ffa502" fill="none" stroke-dasharray="8,4" stroke-width="2"/>
                <path d="M 200 560 Q 350 520 700 410" stroke="#ffa502" fill="none" stroke-dasharray="8,4" stroke-width="2"/>
                
                <!-- Firewall to CA -->
                <line x1="900" y1="320" x2="1000" y2="320" stroke="#f39c12" stroke-dasharray="3,3"/>
            </svg>
            
            <!-- Zones -->
            <div class="zone internet-zone">
                <div class="zone-label">‚òÅÔ∏è Internet / WAN</div>
            </div>
            
            <div class="zone firewall-zone">
                <div class="zone-label">üõ°Ô∏è pfSense Firewall Zone</div>
            </div>
            
            <div class="zone lan-zone">
                <div class="zone-label">üè¢ Internal LAN Network (192.168.1.0/24)</div>
            </div>
            
            <div class="zone vpn-zone">
                <div class="zone-label">üë• Remote Contractors</div>
                <div style="font-size: 10px; color: #666; margin-top: 5px;">VPN Tunnel: 10.0.10.0/24</div>
            </div>
            
            <!-- Components -->
            <div class="component internet">
                <div class="component-icon">üåê</div>
                <div class="component-label">Internet</div>
                <div class="component-info">Public Network</div>
            </div>
            
            <div class="component firewall">
                <div class="component-icon">üõ°Ô∏è</div>
                <div class="component-label">pfSense Firewall</div>
                <div class="component-info">WAN + LAN Gateway<br>192.168.1.1</div>
            </div>
            
            <div class="component openvpn-server">
                <div class="component-icon">üîê</div>
                <div class="component-label">OpenVPN Server</div>
                <div class="component-info">Port: UDP 1194<br>Auth: User + Cert</div>
            </div>
            
            <div class="component computer1">
                <div class="component-icon">üíª</div>
                <div class="component-label">Workstation 1</div>
                <div class="component-info">192.168.1.10</div>
            </div>
            
            <div class="component computer2">
                <div class="component-icon">üíª</div>
                <div class="component-label">Workstation 2</div>
                <div class="component-info">192.168.1.11</div>
            </div>
            
            <div class="component server">
                <div class="component-icon">üñ•Ô∏è</div>
                <div class="component-label">Internal Server</div>
                <div class="component-info">192.168.1.100</div>
            </div>
            
            <div class="component printer">
                <div class="component-icon">üñ®Ô∏è</div>
                <div class="component-label">Network Printer</div>
                <div class="component-info">192.168.1.50</div>
            </div>
            
            <div class="component contractor1">
                <div class="component-icon">üë§</div>
                <div class="component-label">Contractor 1</div>
                <div class="component-info">VPN: 10.0.10.2<br>User + Certificate</div>
            </div>
            
            <div class="component contractor2">
                <div class="component-icon">üë§</div>
                <div class="component-label">Contractor 2</div>
                <div class="component-info">VPN: 10.0.10.3<br>User + Certificate</div>
            </div>
            
            <div class="component contractor3">
                <div class="component-icon">üë§</div>
                <div class="component-label">Contractor 3</div>
                <div class="component-info">VPN: 10.0.10.4<br>User + Certificate</div>
            </div>
            
            <div class="component ca-cert">
                <div class="component-icon">üìú</div>
                <div class="component-label">Certificate Authority</div>
                <div class="component-info">Internal CA<br>Server + User Certs</div>
            </div>
            
            <!-- Legend -->
            <div class="legend">
                <div class="legend-title">Connection Types</div>
                <div class="legend-item">
                    <div class="legend-line" style="background: #ff6b6b; border-style: dashed;"></div>
                    <span>WAN Connection</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line" style="background: #95e1d3;"></div>
                    <span>LAN Connection</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line" style="background: #ffa502; border-style: dashed;"></div>
                    <span>VPN Tunnel (Encrypted)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line" style="background: #f39c12; border-style: dotted;"></div>
                    <span>Certificate Chain</span>
                </div>
            </div>
            
            <!-- Info Box -->
            <div class="info-box">
                <div class="info-title">üîí Security Configuration</div>
                <div class="info-item">
                    <strong>Firewall Rules:</strong><br>
                    ‚Ä¢ WAN: Allow UDP 1194<br>
                    ‚Ä¢ OpenVPN: Pass to LAN
                </div>
                <div class="info-item">
                    <strong>Authentication:</strong><br>
                    ‚Ä¢ Username + Password<br>
                    ‚Ä¢ User Certificates
                </div>
                <div class="info-item">
                    <strong>Encryption:</strong><br>
                    ‚Ä¢ TLS with SHA256<br>
                    ‚Ä¢ 2048-bit Keys
                </div>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 8px; font-size: 13px; line-height: 1.6;">
            <h3 style="color: #1e3c72; margin-bottom: 10px;">üìã Network Flow Overview:</h3>
            <ol style="padding-left: 20px; color: #333;">
                <li><strong>Remote contractors</strong> connect from the internet using OpenVPN client software with their .ovpn configuration files</li>
                <li><strong>pfSense firewall</strong> receives the connection on WAN interface (UDP port 1194)</li>
                <li><strong>OpenVPN server</strong> authenticates users with username/password + certificate validation</li>
                <li>Authenticated contractors receive <strong>VPN IP addresses</strong> from the 10.0.10.0/24 tunnel network</li>
                <li>Encrypted VPN tunnel is established, allowing contractors to access internal <strong>LAN resources</strong> (192.168.1.0/24)</li>
                <li><strong>Certificate Authority</strong> validates all certificates in the trust chain (server + user certificates)</li>
            </ol>
        </div>
    </div>
</body>
</html>